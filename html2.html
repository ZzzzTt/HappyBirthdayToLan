<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ç”Ÿæ—¥æŠ½å¥–è½®ç›˜</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    body {
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      padding: 20px;
      color: #333;
    }

    .container {
      display: flex;
      flex-direction: column;
      align-items: center;
      max-width: 1200px;
      width: 100%;
      gap: 30px;
    }

    header {
      text-align: center;
      margin-bottom: 10px;
    }

    h1 {
      color: #FF6B8B;
      font-size: 2.8rem;
      margin-bottom: 10px;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
    }

    .subtitle {
      color: #666;
      font-size: 1.2rem;
      max-width: 600px;
      margin: 0 auto;
    }

    .content {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 40px;
      width: 100%;
    }

    .wheel-container {
      position: relative;
      flex: 0 0 auto;
    }

    #wheelCanvas {
      display: block;
      background-color: #fff;
      border-radius: 50%;
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
      transition: transform 0.3s ease;
    }

    .pointer {
      position: absolute;
      top: -25px;
      left: 50%;
      transform: translateX(-50%);
      width: 40px;
      height: 50px;
      z-index: 10;
    }

    .pointer i {
      font-size: 40px;
      color: #FF6B8B;
      filter: drop-shadow(0 3px 5px rgba(0, 0, 0, 0.2));
    }

    .controls {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-top: 20px;
      gap: 20px;
    }

    #spinButton {
      background: linear-gradient(to right, #FF6B8B, #FF8E53);
      color: white;
      border: none;
      padding: 18px 45px;
      font-size: 1.3rem;
      border-radius: 50px;
      cursor: pointer;
      box-shadow: 0 10px 20px rgba(255, 107, 139, 0.3);
      transition: all 0.3s ease;
      font-weight: 700;
      letter-spacing: 1px;
    }

    #spinButton:hover {
      transform: translateY(-3px);
      box-shadow: 0 15px 25px rgba(255, 107, 139, 0.4);
    }

    #spinButton:active {
      transform: translateY(1px);
    }

    #spinButton:disabled {
      background: linear-gradient(to right, #cccccc, #aaaaaa);
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }

    .result {
      background-color: white;
      padding: 20px 30px;
      border-radius: 15px;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
      text-align: center;
      min-width: 300px;
      opacity: 0;
      transform: translateY(20px);
      transition: all 0.5s ease;
    }

    .result.show {
      opacity: 1;
      transform: translateY(0);
    }

    .result h3 {
      color: #FF6B8B;
      margin-bottom: 15px;
      font-size: 1.5rem;
    }

    .prize-info {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
    }

    .prize-icon {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 30px;
      margin-bottom: 10px;
    }

    .prize-name {
      font-size: 1.8rem;
      font-weight: 700;
      color: #333;
    }

    .prize-description {
      color: #666;
      font-size: 1.1rem;
      margin-bottom: 5px;
    }

    .prize-id {
      color: #999;
      font-size: 0.9rem;
    }

    .ultimate-badge {
      background-color: gold;
      color: #333;
      padding: 5px 15px;
      border-radius: 20px;
      font-weight: bold;
      margin-top: 5px;
      font-size: 0.9rem;
      display: inline-block;
    }

    .prizes-list {
      flex: 1;
      min-width: 300px;
      max-width: 500px;
      background-color: white;
      border-radius: 15px;
      padding: 25px;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
    }

    .prizes-list h3 {
      color: #FF6B8B;
      margin-bottom: 20px;
      font-size: 1.5rem;
      text-align: center;
    }

    .prize-items {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .prize-item {
      display: flex;
      align-items: center;
      padding: 15px;
      border-radius: 10px;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .prize-item:hover {
      transform: translateY(-5px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }

    .item-icon {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 15px;
      font-size: 24px;
      flex-shrink: 0;
    }

    .item-details {
      flex: 1;
    }

    .item-name {
      font-weight: 700;
      font-size: 1.1rem;
      margin-bottom: 5px;
    }

    .item-description {
      color: #666;
      font-size: 0.9rem;
    }

    .instructions {
      text-align: center;
      color: #666;
      font-size: 1rem;
      max-width: 600px;
      margin-top: 10px;
      line-height: 1.5;
    }

    footer {
      margin-top: 20px;
      color: #999;
      text-align: center;
      font-size: 0.9rem;
    }

    @media (max-width: 900px) {
      .content {
        flex-direction: column;
        align-items: center;
      }

      .wheel-container {
        order: 1;
      }

      .result {
        order: 2;
        max-width: 400px;
      }

      .prizes-list {
        order: 3;
        max-width: 500px;
      }

      #wheelCanvas {
        width: 300px;
        height: 300px;
      }
    }

    @media (max-width: 480px) {
      h1 {
        font-size: 2.2rem;
      }

      #wheelCanvas {
        width: 280px;
        height: 280px;
      }

      .prizes-list {
        padding: 20px;
      }
    }
  </style>
</head>
<body>
<div class="container">
  <header>
    <h1><i class="fas fa-gift"></i> ç”Ÿæ—¥å¹¸è¿æŠ½å¥–</h1>
    <p class="subtitle">è½¬åŠ¨è½®ç›˜ï¼Œèµ¢å–å±äºæ‚¨çš„ç”Ÿæ—¥ç‰¹åˆ«ç¤¼ç‰©ï¼ç»ˆæå¤§å¥–æ­£åœ¨ç­‰å¾…å¹¸è¿çš„ä½ </p>
  </header>

  <div class="content">
    <div class="wheel-container">
      <div class="pointer">
        <i class="fas fa-caret-down"></i>
      </div>
      <canvas id="wheelCanvas" width="500" height="500"></canvas>

      <div class="controls">
        <button id="spinButton">å¼€å§‹æŠ½å¥–</button>
        <p class="instructions">ç‚¹å‡»æŒ‰é’®å¼€å§‹è½¬åŠ¨è½®ç›˜ï¼ŒæŒ‡é’ˆæ‰€æŒ‡åŒºåŸŸå³ä¸ºæ‚¨è·å¾—çš„å¥–å“</p>
      </div>
    </div>

    <div class="result" id="result">
      <h3>æŠ½å¥–ç»“æœ</h3>
      <div class="prize-info">
        <div class="prize-icon" id="resultIcon"></div>
        <div class="prize-name" id="resultName">ç­‰å¾…æŠ½å¥–</div>
        <div class="prize-description" id="resultDescription">ç‚¹å‡»å¼€å§‹æŒ‰é’®æŠ½å–æ‚¨çš„å¥–å“</div>
        <div class="prize-id" id="resultId">å¥–å“ID: --</div>
        <div id="ultimateBadge" class="ultimate-badge" style="display: none;">ç»ˆæå¤§å¥–</div>
      </div>
    </div>

    <div class="prizes-list">
      <h3>å¥–å“åˆ—è¡¨</h3>
      <div class="prize-items" id="prizeItems">
        <!-- å¥–å“åˆ—è¡¨ä¼šé€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
      </div>
    </div>
  </div>

  <footer>
    <p>ç¥æ‚¨ç”Ÿæ—¥å¿«ä¹ï¼æŠ½å¥–æ´»åŠ¨æœ€ç»ˆè§£é‡Šæƒå½’ä¸»åŠæ–¹æ‰€æœ‰</p>
  </footer>
</div>

<script>
  // å¥–å“æ•°æ®
  const prizes = [
    {
      "id": 1,
      "name": "æ—…æ¸¸å¤§å¥–",
      "color": "#A1C4FD",
      "icon": "fas fa-plane",
      "description": "åŒäººå‡ºè¡Œæœºç¥¨",
      "isUltimate": false
    },
    {
      "id": 2,
      "name": "æ¼”å”±ä¼šé—¨ç¥¨",
      "color": "#FF9A9E",
      "icon": "fas fa-music",
      "description": "çƒ­é—¨æ­Œæ‰‹æ¼”å”±ä¼šé—¨ç¥¨",
      "isUltimate": false
    },
    {
      "id": 3,
      "name": "ç”Ÿæ—¥è›‹ç³•å…‘æ¢åˆ¸",
      "color": "#FFD89B",
      "icon": "fas fa-birthday-cake",
      "description": "çŸ¥åå“ç‰Œç¾å‘³ç”Ÿæ—¥è›‹ç³•",
      "isUltimate": false
    },
    {
      "id": 4,
      "name": "ç¥ç§˜ç¤¼ç›’",
      "color": "#D4A5E8",
      "icon": "fas fa-gift",
      "description": "æŠ¤è‚¤å“ç¤¼ç›’ä¸€å¥—",
      "isUltimate": false
    },
    {
      "id": 5,
      "name": "ç¥ç¦å¡ç‰‡",
      "color": "#A8E6CF",
      "icon": "fas fa-heart",
      "description": "ä¸“å±ç”Ÿæ—¥ç¥ç¦",
      "isUltimate": false
    },
    {
      "id": 6,
      "name": "å¹¸è¿çº¢åŒ…",
      "color": "#FFAAA5",
      "icon": "fas fa-money-bill-wave",
      "description": "éšæœºé‡‘é¢çº¢åŒ…",
      "isUltimate": false
    },
    {
      "id": 7,
      "name": "ç»ˆæå¤§å¥–",
      "color": "#FF6B8B",
      "icon": "fas fa-trophy",
      "description": "ç¥ç§˜ç»ˆæå¤§å¥–",
      "isUltimate": true,
      "isSpecial": true
    }
  ];

  // è·å–Canvaså…ƒç´ å’Œä¸Šä¸‹æ–‡
  const canvas = document.getElementById('wheelCanvas');
  const ctx = canvas.getContext('2d');
  const spinButton = document.getElementById('spinButton');
  const resultDiv = document.getElementById('result');
  const resultName = document.getElementById('resultName');
  const resultDescription = document.getElementById('resultDescription');
  const resultIcon = document.getElementById('resultIcon');
  const resultId = document.getElementById('resultId');
  const ultimateBadge = document.getElementById('ultimateBadge');
  const prizeItemsContainer = document.getElementById('prizeItems');

  // è½®ç›˜å‚æ•°
  const centerX = canvas.width / 2;
  const centerY = canvas.height / 2;
  const radius = Math.min(centerX, centerY) - 20;
  let isSpinning = false;
  let currentRotation = 0;
  let spinTimeout = null;

  // åˆå§‹åŒ–å¥–å“åˆ—è¡¨
  function initPrizeList() {
    prizeItemsContainer.innerHTML = '';
    prizes.forEach(prize => {
      const prizeItem = document.createElement('div');
      prizeItem.className = 'prize-item';
      prizeItem.style.backgroundColor = prize.color + '20'; // æ·»åŠ é€æ˜åº¦

      prizeItem.innerHTML = `
                    <div class="item-icon" style="background-color: ${prize.color}">
                        <i class="${prize.icon}"></i>
                    </div>
                    <div class="item-details">
                        <div class="item-name">${prize.name} ${prize.isUltimate ? '<span style="color:#FF6B8B;">â˜…</span>' : ''}</div>
                        <div class="item-description">${prize.description}</div>
                    </div>
                `;

      prizeItemsContainer.appendChild(prizeItem);
    });
  }

  // ç»˜åˆ¶è½®ç›˜
  function drawWheel() {
    // æ¸…ç©ºç”»å¸ƒ
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    const totalPrizes = prizes.length;
    const angleStep = (2 * Math.PI) / totalPrizes;

    // ç»˜åˆ¶æ¯ä¸ªæ‰‡å½¢
    prizes.forEach((prize, index) => {
      const startAngle = index * angleStep + currentRotation;
      const endAngle = (index + 1) * angleStep + currentRotation;

      // ç»˜åˆ¶æ‰‡å½¢
      ctx.beginPath();
      ctx.moveTo(centerX, centerY);
      ctx.arc(centerX, centerY, radius, startAngle, endAngle);
      ctx.closePath();
      ctx.fillStyle = prize.color;
      ctx.fill();

      // ç»˜åˆ¶æ‰‡å½¢è¾¹æ¡†
      ctx.strokeStyle = '#fff';
      ctx.lineWidth = 2;
      ctx.stroke();

      // ç»˜åˆ¶æ–‡æœ¬å’Œå›¾æ ‡
      drawPrizeText(prize, startAngle, endAngle);
    });

    // ç»˜åˆ¶ä¸­å¿ƒåœ†
    ctx.beginPath();
    ctx.arc(centerX, centerY, 50, 0, 2 * Math.PI);
    ctx.fillStyle = '#FF6B8B';
    ctx.fill();
    ctx.strokeStyle = '#fff';
    ctx.lineWidth = 8;
    ctx.stroke();

    // ç»˜åˆ¶ä¸­å¿ƒæ–‡å­—
    ctx.fillStyle = '#fff';
    ctx.font = 'bold 20px Arial';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';
    ctx.fillText('æŠ½å¥–', centerX, centerY - 8);
    ctx.font = '14px Arial';
    ctx.fillText('å¼€å§‹', centerX, centerY + 12);
  }

  // ç»˜åˆ¶å¥–å“æ–‡æœ¬å’Œå›¾æ ‡
  function drawPrizeText(prize, startAngle, endAngle) {
    const midAngle = startAngle + (endAngle - startAngle) / 2;
    const textRadius = radius * 0.7;
    const iconRadius = radius * 0.5;

    // è®¡ç®—æ–‡æœ¬ä½ç½®
    const textX = centerX + Math.cos(midAngle) * textRadius;
    const textY = centerY + Math.sin(midAngle) * textRadius;

    // è®¡ç®—å›¾æ ‡ä½ç½®
    const iconX = centerX + Math.cos(midAngle) * iconRadius;
    const iconY = centerY + Math.sin(midAngle) * iconRadius;

    // ä¿å­˜ä¸Šä¸‹æ–‡çŠ¶æ€
    ctx.save();

    // æ—‹è½¬æ–‡æœ¬ä½¿å…¶å¯è¯»
    ctx.translate(textX, textY);
    ctx.rotate(midAngle + Math.PI / 2);

    // ç»˜åˆ¶å¥–å“åç§°
    ctx.fillStyle = '#333';
    ctx.font = 'bold 16px Arial';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';

    // å¤„ç†é•¿æ–‡æœ¬æ¢è¡Œ
    const maxWidth = 100;
    const name = prize.name;
    const lines = [];
    let line = '';

    for (let i = 0; i < name.length; i++) {
      if (ctx.measureText(line + name[i]).width > maxWidth && line.length > 0) {
        lines.push(line);
        line = name[i];
      } else {
        line += name[i];
      }
    }
    lines.push(line);

    // ç»˜åˆ¶å¤šè¡Œæ–‡æœ¬
    lines.forEach((line, index) => {
      ctx.fillText(line, 0, index * 20 - (lines.length - 1) * 10);
    });

    // æ¢å¤ä¸Šä¸‹æ–‡çŠ¶æ€
    ctx.restore();

    // ç»˜åˆ¶å›¾æ ‡
    ctx.save();
    ctx.translate(iconX, iconY);
    ctx.rotate(midAngle + Math.PI / 2);

    // ä½¿ç”¨Font Awesomeå›¾æ ‡
    const iconSize = 24;
    ctx.font = `24px FontAwesome`;
    ctx.fillStyle = '#333';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';

    // æ˜ å°„å›¾æ ‡åç§°åˆ°Font Awesomeå­—ç¬¦
    const iconMap = {
      'fas fa-plane': 'âœˆ',
      'fas fa-music': 'â™ª',
      'fas fa-birthday-cake': 'ğŸ‚',
      'fas fa-gift': 'ğŸ',
      'fas fa-heart': 'â¤',
      'fas fa-money-bill-wave': 'ğŸ’°',
      'fas fa-trophy': 'ğŸ†'
    };

    const iconChar = iconMap[prize.icon] || 'ğŸ';
    ctx.fillText(iconChar, 0, 0);

    ctx.restore();
  }

  // è½¬åŠ¨è½®ç›˜
  function spinWheel() {
    if (isSpinning) return;

    // è®¾ç½®çŠ¶æ€
    isSpinning = true;
    spinButton.disabled = true;
    resultDiv.classList.remove('show');

    // éšæœºé€‰æ‹©ä¸€ä¸ªå¥–å“ï¼ˆå¯ä»¥æ”¹ä¸ºä»æœåŠ¡å™¨è·å–ç»“æœï¼‰
    const selectedPrizeIndex = Math.floor(Math.random() * prizes.length);
    const selectedPrize = prizes[selectedPrizeIndex];

    // è®¡ç®—æ—‹è½¬è§’åº¦ï¼ˆç¡®ä¿æŒ‡é’ˆæŒ‡å‘æ‰€é€‰å¥–å“ï¼‰
    const totalPrizes = prizes.length;
    const angleStep = 360 / totalPrizes;
    // æ—‹è½¬å¤šåœˆåå†åœåœ¨é€‰ä¸­çš„å¥–å“
    const extraRotation = 5 * 360; // é¢å¤–æ—‹è½¬5åœˆ
    const targetRotation = extraRotation - (selectedPrizeIndex * angleStep) - (angleStep / 2);

    // åŠ¨ç”»å‚æ•°
    let startTime = null;
    const duration = 4000; // 4ç§’
    const startRotation = currentRotation;

    // åŠ¨ç”»å‡½æ•°
    function animateSpin(timestamp) {
      if (!startTime) startTime = timestamp;
      const elapsed = timestamp - startTime;
      const progress = Math.min(elapsed / duration, 1);

      // ä½¿ç”¨ç¼“åŠ¨å‡½æ•°ä½¿æ—‹è½¬æ›´è‡ªç„¶
      const easeOut = 1 - Math.pow(1 - progress, 3);
      currentRotation = startRotation + (targetRotation * easeOut * Math.PI / 180);

      drawWheel();

      if (progress < 1) {
        requestAnimationFrame(animateSpin);
      } else {
        // åŠ¨ç”»ç»“æŸ
        isSpinning = false;
        spinButton.disabled = false;

        // æ˜¾ç¤ºç»“æœ
        showResult(selectedPrize);
      }
    }

    // å¼€å§‹åŠ¨ç”»
    requestAnimationFrame(animateSpin);
  }

  // æ˜¾ç¤ºæŠ½å¥–ç»“æœ
  function showResult(prize) {
    resultName.textContent = prize.name;
    resultDescription.textContent = prize.description;
    resultId.textContent = `å¥–å“ID: ${prize.id}`;
    resultIcon.innerHTML = `<i class="${prize.icon}"></i>`;
    resultIcon.style.backgroundColor = prize.color;

    // æ˜¾ç¤ºæˆ–éšè—ç»ˆæå¤§å¥–æ ‡å¿—
    if (prize.isUltimate) {
      ultimateBadge.style.display = 'inline-block';
    } else {
      ultimateBadge.style.display = 'none';
    }

    // æ˜¾ç¤ºç»“æœåŒºåŸŸ
    setTimeout(() => {
      resultDiv.classList.add('show');
    }, 500);

    // æ’­æ”¾éŸ³æ•ˆï¼ˆå¯é€‰ï¼‰
    playSound(prize.isUltimate);
  }

  // æ’­æ”¾éŸ³æ•ˆ
  function playSound(isUltimate) {
    try {
      const audioContext = new (window.AudioContext || window.webkitAudioContext)();
      const oscillator = audioContext.createOscillator();
      const gainNode = audioContext.createGain();

      oscillator.connect(gainNode);
      gainNode.connect(audioContext.destination);

      if (isUltimate) {
        // ç»ˆæå¤§å¥–éŸ³æ•ˆ
        oscillator.frequency.setValueAtTime(523.25, audioContext.currentTime); // C5
        oscillator.frequency.setValueAtTime(659.25, audioContext.currentTime + 0.1); // E5
        oscillator.frequency.setValueAtTime(783.99, audioContext.currentTime + 0.2); // G5
        oscillator.frequency.setValueAtTime(1046.50, audioContext.currentTime + 0.3); // C6
        gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
        gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
        oscillator.start(audioContext.currentTime);
        oscillator.stop(audioContext.currentTime + 0.5);
      } else {
        // æ™®é€šå¥–å“éŸ³æ•ˆ
        oscillator.frequency.setValueAtTime(659.25, audioContext.currentTime); // E5
        oscillator.frequency.setValueAtTime(523.25, audioContext.currentTime + 0.1); // C5
        gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
        gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
        oscillator.start(audioContext.currentTime);
        oscillator.stop(audioContext.currentTime + 0.3);
      }
    } catch (e) {
      console.log("éŸ³é¢‘æ’­æ”¾å¤±è´¥:", e);
    }
  }

  // åˆå§‹åŒ–
  function init() {
    drawWheel();
    initPrizeList();

    // ç»‘å®šæŒ‰é’®ç‚¹å‡»äº‹ä»¶
    spinButton.addEventListener('click', spinWheel);

    // åˆå§‹æ˜¾ç¤ºä¸€ä¸ªéšæœºå¥–å“ä¿¡æ¯
    const randomPrize = prizes[Math.floor(Math.random() * prizes.length)];
    resultIcon.innerHTML = `<i class="${randomPrize.icon}"></i>`;
    resultIcon.style.backgroundColor = randomPrize.color;
  }

  // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
  window.addEventListener('load', init);

  // å“åº”çª—å£å¤§å°å˜åŒ–
  window.addEventListener('resize', function() {
    // åœ¨ç§»åŠ¨ç«¯è°ƒæ•´Canvaså¤§å°
    if (window.innerWidth <= 900) {
      const size = Math.min(300, window.innerWidth - 40);
      canvas.width = size;
      canvas.height = size;
      drawWheel();
    } else {
      canvas.width = 500;
      canvas.height = 500;
      drawWheel();
    }
  });
</script>
</body>
</html>