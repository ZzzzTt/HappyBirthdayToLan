<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <!-- 关键的自适应meta标签 -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta name="format-detection" content="telephone=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <title>LAN²KING回馈客户幸运抽奖</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    /* 初始加载动画 */
    .page-loader {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #1a2980 0%, #26d0ce 100%);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      transition: opacity 0.5s ease;
    }

    .loader-logo {
      font-size: 2.5rem;
      font-weight: 800;
      color: white;
      margin-bottom: 1.5rem;
      text-align: center;
    }

    .loader-spinner {
      width: 50px;
      height: 50px;
      border: 3px solid rgba(255, 255, 255, 0.3);
      border-top-color: white;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .loader-text {
      color: rgba(255, 255, 255, 0.8);
      margin-top: 1rem;
      font-size: 0.9rem;
    }
  </style>
</head>
<body>
<!-- 初始加载动画 -->
<div class="page-loader" id="pageLoader">
  <div class="loader-logo">LAN²KING</div>
  <div class="loader-spinner"></div>
  <div class="loader-text">加载中...</div>
</div>

<!-- 第一阶段：简化版身份信息收集页面 -->
<div class="user-info-page simplified" id="userInfoPage">
  <div class="info-background"></div>

  <div class="info-container simplified-container">
    <!-- 简洁LOGO区域 -->
    <div class="company-logo-simple">
      <div class="logo-icon-simple">
        <img src="/HappyBirthdayToLan/image/logo.png" alt="LAN² Logo" />
      </div>
      <div class="logo-text-simple">
        <h1 class="logo-title">LAN²KING</h1>
        <p class="logo-subtitle">回馈客户幸运抽奖</p>
      </div>
    </div>

    <!-- 简化的用户信息表单卡片 -->
    <div class="info-form-card-simple">
      <div class="form-header-simple">
        <p class="form-desc-simple">请输入您的信息开始抽奖</p>
      </div>

      <form id="userInfoForm" class="simplified-form">
        <!-- 姓名输入 -->
        <div class="form-group-simple">
          <div class="input-container">
            <div class="input-icon-simple">
              <i class="fas fa-user"></i>
            </div>
            <input type="text"
                   id="userName"
                   name="userName"
                   placeholder="请输入您的姓名"
                   required
                   autocomplete="name"
                   maxlength="10"
                   class="simplified-input">
          </div>
          <div class="error-message-simple" id="nameError"></div>
        </div>

        <!-- 手机号输入 -->
        <div class="form-group-simple">
          <div class="input-container">
            <div class="input-icon-simple">
              <i class="fas fa-phone"></i>
            </div>
            <input type="tel"
                   id="userPhone"
                   name="userPhone"
                   placeholder="请输入您的手机号码"
                   required
                   pattern="^1[3-9]\d{9}$"
                   autocomplete="tel"
                   maxlength="11"
                   class="simplified-input">
          </div>
          <div class="error-message-simple" id="phoneError"></div>
        </div>

        <!-- 协议确认 -->
        <div class="agreement-simple">
          <label class="checkbox-simple">
            <input type="checkbox" id="agreeTerms" name="agreeTerms" required>
            <span class="checkmark"></span>
            <span class="agreement-text">
                                我已阅读并同意
                                <a href="#" class="terms-link-simple">用户协议</a>
                                和
                                <a href="#" class="terms-link-simple">隐私政策</a>
                            </span>
          </label>
          <div class="error-message-simple" id="termsError"></div>
        </div>

        <!-- 提交按钮 -->
        <div class="form-actions-simple">
          <button type="submit" class="submit-btn-simple" id="submitInfoBtn">
            <span class="btn-text">开始抽奖</span>
            <i class="fas fa-arrow-right btn-arrow"></i>
          </button>

          <div class="security-notice">
            <i class="fas fa-shield-alt"></i>
            <span>您的信息将严格保密</span>
          </div>
        </div>
      </form>
    </div>

    <!-- 简洁的活动提示 -->
    <div class="activity-prompt-simple">
      <div class="prompt-item">
        <i class="fas fa-gift"></i>
        <span>100%有奖 · 终极大奖等你拿</span>
      </div>
    </div>
  </div>
</div>

<!-- 第二阶段：生日快乐首页 -->
<div class="birthday-home" id="birthdayHome">
  <div class="home-background" id="homeBackground"></div>

  <div class="home-container">

    <!-- 主内容区域 -->
    <div class="home-content">

      <!-- 合并的礼物和抽奖区域 -->
      <div class="gift-lottery-card">

        <h2>亲爱的<span id="greetingName">朋友</span></h2>

        <div class="gift-content">
          <p class="gift-intro">LAN²查询到马上到您的生日了</p>
          <p class="gift-intro">我们为您准备了生日特别版幸运抽奖</p>

          <div class="ultimate-gift">
            <div class="gift-icon">
              <img src="/HappyBirthdayToLan/image/logo.png" alt="用户头像" class="avatar-img" />
            </div>
            <h3>神秘终极大奖</h3>
            <p class="gift-prize">敬请期待</p>
          </div>
        </div>
      </div>

      <!-- 开启按钮 -->
      <div class="home-action">
        <button class="start-lottery-btn" id="startLotteryBtn">
          <i class="fas fa-play-circle"></i>
          <span>开启我的幸运抽奖</span>
        </button>

      </div>

      <!-- 底部装饰 -->
      <div class="home-footer">
        <div class="footer-text">
          <i class="fas fa-heart"></i>
          <p>LAN²KING · 一生一次，专属幸运</p>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- 第三阶段：抽奖页面 -->
<div class="lottery-page" id="lotteryPage">
  <div class="lottery-background" id="lotteryBackground"></div>

  <div class="lottery-container">
    <!-- 顶部导航 -->
    <header class="lottery-header">

      <div class="header-center">
        <div class="company-badge">
          <span>LAN²KING</span>
        </div>
      </div>
    </header>

    <div class="wheel-section">
      <div class="section-title">
          <p class="subtitle">转动轮盘，赢取属于您的生日特别礼物！终极大奖正在等待幸运的你</p>
      </div>

      <div class="wheel-container">
        <div class="pointer">
          <i class="fas fa-caret-down"></i>
        </div>
        <canvas id="wheelCanvas" width="400" height="400"></canvas>

      </div>
    </div>

    <!-- 抽奖按钮 -->
    <div class="controls">
      <button class="lottery-btn" id="lotteryBtn">
        <i class="fas fa-redo-alt"></i>
        <span>转动转盘（仅此一次）</span>
      </button>
    </div>

    <!-- 奖品展示 -->
    <div class="prizes-section">
      <div class="section-title">
        <h2><i class="fas fa-trophy"></i> 奖品展示</h2>
      </div>

      <div class="prizes-grid" id="prizesGrid">
        <!-- 奖品卡片将通过JavaScript动态生成 -->
      </div>

    </div>

    <!-- 中奖结果 -->
    <div class="result-section">
      <div class="section-title">
        <h2><i class="fas fa-award"></i> 抽奖结果</h2>
      </div>

      <div class="result-card" id="resultCard">
        <div class="result-icon">
          <i class="fas fa-question-circle"></i>
        </div>
        <p id="resultText">等待抽奖...</p>
        <div class="result-actions" id="resultActions" style="display: none;">
          <button class="view-prize-btn" id="viewPrizeBtn">
            <i class="fas fa-eye"></i>
            <span>查看我的大奖</span>
          </button>
        </div>
      </div>
    </div>

    <!-- 页脚 -->
    <footer class="lottery-footer">
      <div class="footer-content">
        <p>© 2026 LAN²KING回馈客户幸运抽奖活动</p>
        <div class="social-icons">
          <i class="fab fa-weixin"></i>
          <i class="fab fa-weibo"></i>
        </div>
      </div>
    </footer>
  </div>
</div>

<!-- 中奖弹窗 -->
<div class="prize-popup" id="prizePopup">
  <div class="popup-content">
    <div class="confetti-canvas" id="confettiCanvas"></div>

    <div class="popup-header">
      <h2 id="popupTitle"><i class="fas fa-crown"></i> 终极大奖</h2>
      <button class="close-popup" id="closePopup">
        <i class="fas fa-times"></i>
      </button>
    </div>

    <div class="prize-display">
      <div class="prize-images">
        <div class="prize-image">
          <img id="prizeImage1" src="" alt="演唱会门票">
          <p>颜人中演唱会VIP门票</p>
        </div>
        <div class="prize-image">
          <img id="prizeImage2" src="" alt="两日游">
          <p>南昌两日豪华游</p>
        </div>
      </div>

      <div class="prize-info">
        <div class="prize-details" id="prizeDetails"></div>
      </div>
    </div>

    <button class="unlock-prize-btn" id="confirmBtn">
      <i class="fas fa-check-circle"></i>
      <span>确认领取</span>
    </button>
  </div>
</div>

<!-- 视频播放层 -->
<div class="video-layer" id="videoLayer">
  <div class="video-container">

    <div class="video-content">
      <p>请观看生日祝福视频，解锁您的专属大奖</p>

      <video id="birthdayVideo" controls autoplay playsinline>
        <source src="" type="video/mp4">
        您的浏览器不支持视频播放。
      </video>

      <div class="video-overlay" id="videoOverlay">
        <div class="overlay-content">
          <p>点击下方按钮解锁您的专属大奖</p>
          <button class="unlock-prize-btn" id="unlockPrizeBtn">
            <i class="fas fa-unlock"></i>
            <span>获取您的专属大奖</span>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- 中奖结果弹窗 -->
<div class="result-popup" id="resultPopup">
  <div class="popup-content">
    <div class="confetti-canvas" id="resultConfetti"></div>

    <div class="popup-header">
      <h2><i class="fas fa-trophy"></i> 恭喜您中奖了！</h2>
      <button class="close-popup" id="closeResultPopup">
        <i class="fas fa-times"></i>
      </button>
    </div>

    <div class="prize-result">
      <div class="prize-icon-large">
        <i class="fas fa-crown" id="resultPrizeIcon"></i>
      </div>

      <div class="prize-info">
        <h3 id="resultPopupPrizeName">终极大奖</h3>
        <div class="prize-level" id="resultPrizeLevel">
          <span class="level-badge">一等奖</span>
        </div>
        <p id="resultPopupPrizeDesc">您获得了我们的终极大奖！</p>
      </div>
    </div>

    <div class="popup-actions">
      <button class="view-details-btn" id="viewPrizeDetailsBtn">
        <i class="fas fa-gift"></i>
        <span>查看奖品详情</span>
      </button>

      <button class="share-btn" id="shareResultBtn">
        <i class="fas fa-share-alt"></i>
        <span>分享喜悦</span>
      </button>

      <button class="confirm-result-btn" id="confirmResultBtn">
        <i class="fas fa-check-circle"></i>
        <span>确认领取</span>
      </button>
    </div>

    <div class="result-footer">
      <p><i class="fas fa-clock"></i> 请在24小时内确认领取，逾期将视为放弃</p>
    </div>
  </div>
</div>

<!-- 礼花特效容器 -->
<div id="fireworksContainer"></div>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
<script src="script.js"></script>
</body>
</html>